---
layout:     post
title:      "多语言的一些思考"
tags:
- 折腾
---

目前项目需要做多语言，项目之前的做法是把中文写在excel中，用一个wordID来标识每一句中文，用工具导出成lua表，在代码中用wordID索引对应的文字来显示。代码中看起来像这样：

```
_ID2WORD(111) -- _ID2WORD 用传入的wordID来索引到文字后返回
```

这个做法，使代码中每一个显示文字的地方都是数字。

我觉得这里存在2个问题：

1. 不是所见即所得，看到一个应该显示文字的地方却不能直接知道是什么。
2. 人工维护的excel表，在面临修改的时候，如果表内容少，不会感觉到有什么问题，但是随着项目规模变大，文字变多，人工维护的excel表将会成为灾难，充满冗余。

有同事提出，android项目的string.xml中也是类似这样的手动配置，我没有想明白在面临项目规模变大，需要处理的多语言文本变多的时候，这样的手动维护怎么保证没有冗余，也没有缺漏？

我后来建议采取[在Lua中使用gettext实现多语言支持](/2015/11/19/using-gettext-in-lua)这个自动化搜索多语言文本的做法。

我们的项目中，除了这一个手动维护的配置表外，每一张图片，每一个布局文件，都先集中配置在一张lua表中，代码中需要使用的时候都是用lua表里的全局变量。我觉得这个将近2000行的配置表也存在上述问题。思考再三，不论有没有必要把图片名，布局文件名记中登记，但是手动维护确是不可行的方式。
